<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Widget InmoBot</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 40px;
      background: #f0f0f0;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 40px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    h1 {
      color: #333;
    }
    .status {
      padding: 16px;
      margin: 20px 0;
      border-radius: 8px;
      background: #e3f2fd;
      color: #1976d2;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ü§ñ Test del Widget InmoBot</h1>
    <div class="status" id="status">
      Esperando que el widget se cargue...
    </div>
    <p><strong>Instrucciones:</strong></p>
    <ol>
      <li>El bot√≥n flotante deber√≠a aparecer abajo a la derecha</li>
      <li>Haz click en el bot√≥n para abrir el chat</li>
      <li>Prueba enviar un mensaje</li>
    </ol>
  </div>

  <!-- Importar el widget en modo desarrollo -->
  <script type="module">
    console.log('üöÄ Script module iniciado');

    (async () => {
      try {
        const module = await import('/src/index.js');
        console.log('‚úÖ M√≥dulo importado:', module);
        console.log('‚úÖ window.InmoBot:', window.InmoBot);

        // Esperar un momento adicional
        await new Promise(resolve => setTimeout(resolve, 500));

        if (window.InmoBot) {
          console.log('üéØ Inicializando widget...');

          window.InmoBot.init({
            apiUrl: 'https://n8n-bot-inmobiliario.onrender.com/webhook/chat',
            primaryColor: '#2563eb',
            botName: 'AsistenteBot',
            welcomeMessage: '¬°Hola! Soy tu asistente inmobiliario virtual. ¬øEn qu√© te puedo ayudar hoy? üè†',
            placeholderText: 'Escribe tu consulta...',
            position: 'bottom-right',
            buttonSize: '60px',
            chatWidth: '380px',
            chatHeight: '600px'
          });

          document.getElementById('status').innerHTML = '‚úÖ Widget cargado correctamente. Mira abajo a la derecha ‚Üí';
          document.getElementById('status').style.background = '#e8f5e9';
          document.getElementById('status').style.color = '#2e7d32';
        } else {
          document.getElementById('status').innerHTML = '‚ùå Error: window.InmoBot no est√° disponible despu√©s de importar';
          document.getElementById('status').style.background = '#ffebee';
          document.getElementById('status').style.color = '#c62828';
          console.error('‚ùå window.InmoBot no est√° definido');
        }
      } catch (error) {
        console.error('‚ùå Error al cargar el m√≥dulo:', error);
        document.getElementById('status').innerHTML = '‚ùå Error al cargar: ' + error.message;
        document.getElementById('status').style.background = '#ffebee';
        document.getElementById('status').style.color = '#c62828';
      }
    })();
  </script>
</body>
</html>
